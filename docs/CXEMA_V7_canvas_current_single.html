<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CXEMA V7 ‚Äî Canvas Current</title>
  <style>
    :root {
      --bg: #0b0f14;
      --nav-bg: rgba(11, 15, 20, 0.72);
      --panel-soft: rgba(255, 255, 255, 0.02);
      --text: rgba(245, 247, 250, 0.92);
      --muted: rgba(245, 247, 250, 0.58);
      --line: rgba(255, 255, 255, 0.10);
      --line-strong: rgba(255, 255, 255, 0.18);
      --row-line: rgba(255, 255, 255, 0.12);
      --row-line-soft: rgba(255, 255, 255, 0.08);
      --radius: 12px;
      --radius-lg: 18px;
      --accent: #ff2da1;
      --ok: rgba(245, 247, 250, 0.92);
      --bad: #ff7d7d;
      --modal-backdrop: rgba(4, 8, 14, 0.48);
      --tile-a: rgba(255, 255, 255, 0.028);
      --tile-b: rgba(255, 255, 255, 0.018);
    }

    html[data-theme="light"] {
      --bg: #f6f7f9;
      --nav-bg: rgba(246, 247, 249, 0.78);
      --panel-soft: rgba(11, 18, 32, 0.02);
      --text: rgba(11, 18, 32, 0.92);
      --muted: rgba(11, 18, 32, 0.62);
      --line: rgba(11, 18, 32, 0.10);
      --line-strong: rgba(11, 18, 32, 0.18);
      --row-line: rgba(11, 18, 32, 0.18);
      --row-line-soft: rgba(11, 18, 32, 0.10);
      --modal-backdrop: rgba(11, 18, 32, 0.28);
      --tile-a: rgba(11, 18, 32, 0.045);
      --tile-b: rgba(11, 18, 32, 0.030);
    }

    *, *::before, *::after { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 14px/1.35 Manrope, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      font-variant-numeric: tabular-nums;
    }

    .app { min-height: 100vh; }
    .container { padding: 14px 26px; display: grid; gap: 10px; }

    .nav {
      position: sticky;
      top: 0;
      z-index: 30;
      display: flex;
      gap: 6px;
      align-items: center;
      padding: 8px 16px 8px 24px;
      border-bottom: 1px solid var(--line);
      background: var(--nav-bg);
      backdrop-filter: blur(10px);
    }

    .brand {
      font-size: 29px;
      font-weight: 900;
      letter-spacing: -0.025em;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      margin-right: 8px;
    }

    .brand .v7 { color: var(--accent); margin-left: 4px; }
    .nav-add { margin-left: auto; }

    .btn {
      min-height: 26px;
      padding: 4px 8px;
      border-radius: 8px;
      border: 0;
      background: transparent;
      color: var(--text);
      cursor: pointer;
      font: inherit;
      font-weight: 600;
      line-height: 1;
      opacity: 0.78;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn:hover { opacity: 1; }
    .btn.active, .btn.tab-active { opacity: 1; background: #fff; color: #000; }
    .btn.icon-btn { width: 28px; min-height: 26px; padding: 4px; gap: 0; }
    .btn.icon-btn svg { width: 16px; height: 16px; }
    .btn.icon-stroke svg { stroke: currentColor; fill: none; stroke-width: 2.15; stroke-linecap: round; stroke-linejoin: round; }
    .btn.cta { opacity: 0.92; }

    .scene { display: none; }
    .scene.active { display: grid; gap: 10px; }

    .panel, .card, .kpi-card {
      border: 0;
      border-radius: var(--radius-lg);
      padding: 12px;
      background: transparent;
      box-shadow: none;
    }

    .top-panel { padding: 10px 12px; }
    .top-panel-sticky { position: sticky; top: 46px; z-index: 21; background: var(--bg); }

    .h1 { margin: 0; font-size: 18px; font-weight: 800; letter-spacing: -0.015em; }
    .muted { color: var(--muted); font-size: 13px; }

    .row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .grid { display: grid; gap: 10px; }
    .grid-2 { display: grid; gap: 10px; grid-template-columns: repeat(2, minmax(0, 1fr)); }

    .input {
      width: 100%;
      min-height: 30px;
      border: 1px solid var(--line);
      border-radius: 8px;
      background: transparent;
      color: var(--text);
      padding: 6px 8px;
      font: inherit;
    }

    .kpi-value {
      margin-top: 5px;
      font-size: 30px;
      line-height: 1;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .accent { color: var(--accent); }
    .ok { color: var(--ok); }
    .bad { color: var(--bad); }

    .dashboard-strip { display: grid; gap: 10px; grid-template-columns: repeat(6, minmax(0, 1fr)); }
    .overview-kpi-strip { display: grid; gap: 10px; grid-template-columns: repeat(7, minmax(0, 1fr)); }
    .life-kpi-strip { grid-template-columns: repeat(4, minmax(0, 1fr)); }

    .timeline-panel { margin-top: 8px; }
    .timeline-head { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 6px; }
    .timeline-actions { gap: 6px; flex-wrap: nowrap; }
    .timeline-actions .btn { opacity: 1; }

    .timeline-current-month {
      margin: 0;
      padding: 0;
      border: 0;
      background: transparent;
      color: var(--text);
      font-size: 28px;
      line-height: 1;
      font-weight: 800;
      letter-spacing: -0.02em;
      cursor: pointer;
    }

    .timeline-range { width: 100%; margin-top: 0; }

    .month-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      opacity: 0;
      pointer-events: none;
    }

    .classic-layout { display: grid; grid-template-columns: 360px 1fr; gap: 10px; }

    .project-tile {
      border: 1px solid var(--tile-a);
      border-radius: var(--radius);
      padding: 10px 12px;
      position: relative;
      display: block;
      background: transparent;
      color: inherit;
      text-decoration: none;
      cursor: pointer;
    }

    .project-tile:nth-child(even) { border-color: var(--tile-b); }
    .project-tile + .project-tile { margin-top: 8px; }
    .project-tile-title { font-size: 17px; font-weight: 800; margin-bottom: 4px; }

    .table-wrap {
      border: 0;
      border-radius: 0;
      overflow: auto;
      background: transparent;
      border-bottom: 1px solid var(--row-line-soft);
    }

    table { width: 100%; border-collapse: collapse; min-width: 960px; font-size: 13px; }
    th {
      position: sticky;
      top: 0;
      z-index: 2;
      background: var(--bg);
      border-bottom: 1px solid var(--row-line);
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
      letter-spacing: 0.02em;
      padding: 9px 8px;
      text-align: left;
    }

    td { padding: 9px 8px; vertical-align: top; border-bottom: none; }

    .overview-table th:nth-child(n + 2), .overview-table td:nth-child(n + 2) { text-align: right; }
    .life-table th:nth-child(n + 3), .life-table td:nth-child(n + 3) { text-align: right; }

    .tabs { display: flex; gap: 8px; }

    .expense-sheet, .income-sheet { width: min(1120px, 100%); margin-right: auto; gap: 10px; }
    .expense-group-controls { gap: 8px; width: min(540px, 100%); }
    .expense-group-create-input { width: min(280px, 100%); }

    .sheet-group { border: 0; border-radius: var(--radius); overflow: hidden; background: transparent; }
    .sheet-group-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text);
      font-weight: 800;
      padding: 8px 11px;
      border-bottom: 1px solid var(--row-line);
    }

    .sheet-plus-btn { min-width: 30px; min-height: 30px; font-size: 22px; padding: 0; }

    .expense-table { min-width: 820px; table-layout: fixed; }
    .expense-table th:nth-child(1), .expense-table td:nth-child(1) { width: 150px; text-align: left; }
    .expense-table th:nth-child(2), .expense-table td:nth-child(2) { width: 112px; text-align: center; }
    .expense-table th:nth-child(3), .expense-table td:nth-child(3) { width: 52px; text-align: right; }
    .expense-table th:nth-child(4), .expense-table td:nth-child(4),
    .expense-table th:nth-child(5), .expense-table td:nth-child(5) { width: 96px; text-align: right; }
    .expense-table th:nth-child(6), .expense-table td:nth-child(6),
    .expense-table th:nth-child(7), .expense-table td:nth-child(7) { width: 76px; text-align: center; }
    .expense-table th:nth-child(8), .expense-table td:nth-child(8) { width: 122px; text-align: right; }
    .expense-table th:last-child, .expense-table td:last-child { width: 44px; text-align: center; }

    .agency-line { width: 30%; min-width: 320px; max-width: 380px; padding: 8px 10px; }
    .agency-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .agency-amount { font-size: 17px; font-weight: 700; }

    .payments-layout { width: min(560px, 100%); margin-right: auto; gap: 8px; }
    .payments-rows-panel { padding: 10px; border: 0; border-radius: 0; }
    .payments-list-wrap { display: grid; gap: 8px; }
    .payments-line { display: flex; align-items: center; gap: 8px; }
    .payments-date-input { width: 156px; min-width: 156px; }
    .payments-amount-input { width: 15ch; min-width: 15ch; max-width: 15ch; text-align: right; }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      padding: 22px;
      background: var(--modal-backdrop);
      backdrop-filter: blur(9px);
      z-index: 90;
    }

    .modal-backdrop.active { display: grid; }

    .modal {
      width: min(700px, calc(100vw - 56px));
      max-height: calc(100vh - 64px);
      overflow: auto;
      border-radius: var(--radius-lg);
      border: 1px solid var(--line);
      padding: 14px;
      background: var(--panel-soft);
    }

    .accent-modal { width: min(420px, calc(100vw - 56px)); }
    .accent-color-input { width: 64px; height: 40px; min-height: 40px; padding: 0; }
    .accent-hex-input { width: 120px; }

    @media (max-width: 1320px) {
      .classic-layout { grid-template-columns: 1fr; }
      .dashboard-strip, .overview-kpi-strip { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      .life-kpi-strip { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    @media (max-width: 860px) {
      .container { padding: 10px 8px 16px; }
      .nav { flex-wrap: wrap; padding: 10px; }
      .brand { font-size: 24px; }
      .nav-add { margin-left: 0; }
      .dashboard-strip, .overview-kpi-strip, .grid-2, .life-kpi-strip { grid-template-columns: 1fr; }
      .payments-line { flex-wrap: wrap; }
      .kpi-value { font-size: 23px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <nav class="nav">
      <div class="brand">CXEMA <span class="v7">V7</span></div>
      <button class="btn active" data-scene="overview">–ü—Ä–æ–µ–∫—Ç—ã</button>
      <button class="btn" data-scene="life">–ñ–∏–∑–Ω—å</button>
      <button class="btn" data-scene="project">–ü—Ä–æ–µ–∫—Ç</button>
      <button class="btn cta nav-add" data-open="add-project">+ –ü—Ä–æ–µ–∫—Ç</button>
      <button class="btn icon-btn icon-stroke" id="theme-toggle" title="–¢–µ–º–∞" aria-label="–¢–µ–º–∞">
        <svg id="theme-icon" viewBox="0 0 24 24"><path d="M21 12.8A7.4 7.4 0 0 1 11.2 3a6.8 6.8 0 1 0 9.8 9.8Z" /></svg>
      </button>
      <button class="btn icon-btn icon-stroke" data-open="accent" title="–ê–∫—Ü–µ–Ω—Ç" aria-label="–ê–∫—Ü–µ–Ω—Ç">
        <svg viewBox="0 0 24 24"><path d="M12 3c4.9 0 9 3.6 9 8.2 0 2.7-1.5 4.3-3.4 5.3-1.2.6-1.8 1.7-1.8 3v.7H8.2v-.7c0-1.3-.6-2.4-1.8-3C4.5 15.5 3 13.9 3 11.2 3 6.6 7.1 3 12 3Z"/><path d="M9 21h6"/></svg>
      </button>
      <button class="btn icon-btn" data-scene="settings" title="–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" aria-label="–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
    </nav>

    <div class="container">
      <section class="scene active" id="scene-overview">
        <div class="panel top-panel top-panel-sticky">
          <div class="timeline-panel">
            <div class="timeline-head">
              <button class="timeline-current-month" data-month-open="overview-month">—Ñ–µ–≤—Ä–∞–ª—å 2026</button>
              <div class="row timeline-actions">
                <button class="btn icon-btn icon-stroke" title="–û–±–Ω–æ–≤–∏—Ç—å" aria-label="–û–±–Ω–æ–≤–∏—Ç—å"><svg viewBox="0 0 24 24"><path d="M21 12a9 9 0 1 1-2.64-6.36"/><path d="M21 3v6h-6"/></svg></button>
                <button class="btn icon-btn" data-scene="settings" title="–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" aria-label="–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
              </div>
            </div>
            <input id="overview-month" class="month-hidden" type="month" value="2026-02" />
            <input class="timeline-range" type="range" min="0" max="12" step="1" value="3" />
          </div>
        </div>

        <div class="overview-kpi-strip">
          <div class="kpi-card"><div class="muted">–ü—Ä–æ–µ–∫—Ç—ã</div><div class="kpi-value">2</div></div>
          <div class="kpi-card"><div class="muted">–ü–æ–ª—É—á–µ–Ω–æ</div><div class="kpi-value">10 000 000</div></div>
          <div class="kpi-card"><div class="muted">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div><div class="kpi-value">6 333</div></div>
          <div class="kpi-card"><div class="muted">–ê–≥–µ–Ω—Ç—Å–∫–∏–µ</div><div class="kpi-value">1 000 000</div></div>
          <div class="kpi-card"><div class="muted">–î–æ–ø –ø—Ä–∏–±—ã–ª—å</div><div class="kpi-value">1 000</div></div>
          <div class="kpi-card"><div class="muted">–í—Å–µ–≥–æ –≤ –∫–∞—Ä–º–∞–Ω–µ</div><div class="kpi-value accent">1 001 000</div></div>
          <div class="kpi-card"><div class="muted">–ë–∞–ª–∞–Ω—Å</div><div class="kpi-value">9 993 667</div></div>
        </div>

        <div class="classic-layout">
          <div class="panel">
            <button class="project-tile" data-scene="project" style="width: 100%; text-align: left;">
              <div class="project-tile-title">2</div>
              <div class="muted">–ö–ª–∏–µ–Ω—Ç</div>
              <div class="muted">–ü–æ–ª—É—á–µ–Ω–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: 10 000 000</div>
              <div class="muted">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ –ø–æ –ø—Ä–æ–µ–∫—Ç—É: 6 333</div>
            </button>
            <button class="project-tile" data-scene="project" style="width: 100%; text-align: left;">
              <div class="project-tile-title">1</div>
              <div class="muted">‚Äî</div>
              <div class="muted">–ü–æ–ª—É—á–µ–Ω–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: 0</div>
              <div class="muted">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ –ø–æ –ø—Ä–æ–µ–∫—Ç—É: 0</div>
            </button>
          </div>

          <div class="panel">
            <div class="table-wrap">
              <table class="overview-table">
                <thead>
                  <tr>
                    <th>–ü—Ä–æ–µ–∫—Ç</th><th>–ü–æ–ª—É—á–µ–Ω–æ</th><th>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</th><th>–ê–≥–µ–Ω—Ç—Å–∫–∏–µ</th><th>–î–æ–ø –ø—Ä–∏–±—ã–ª—å</th><th>–í—Å–µ–≥–æ –≤ –∫–∞—Ä–º–∞–Ω–µ</th><th>–ë–∞–ª–∞–Ω—Å</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>2</td><td>10 000 000</td><td>6 333</td><td>1 000 000</td><td>1 000</td><td>1 001 000</td><td>9 993 667</td></tr>
                  <tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section class="scene" id="scene-project">
        <div class="panel top-panel">
          <div class="row" style="justify-content: space-between;">
            <div class="h1">2</div>
            <div class="row">
              <button class="btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
              <button class="btn icon-btn" data-open="project-settings">‚öô</button>
            </div>
          </div>
        </div>

        <div class="dashboard-strip">
          <div class="kpi-card"><div class="muted">–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞</div><div class="kpi-value">0</div></div>
          <div class="kpi-card"><div class="muted">–†–∞—Å—Ö–æ–¥—ã</div><div class="kpi-value">6 333</div></div>
          <div class="kpi-card"><div class="muted">–ê–≥–µ–Ω—Ç—Å–∫–∏–µ (10%)</div><div class="kpi-value">0</div></div>
          <div class="kpi-card"><div class="muted">–î–æ–ø –ø—Ä–∏–±—ã–ª—å</div><div class="kpi-value">1 000</div></div>
          <div class="kpi-card"><div class="muted">–í –∫–∞—Ä–º–∞–Ω–µ</div><div class="kpi-value">1 000</div></div>
          <div class="kpi-card"><div class="muted">–†–∞–∑–Ω–∏—Ü–∞</div><div class="kpi-value bad">-7 333</div></div>
        </div>

        <div class="panel"><div class="row tabs">
          <button class="btn tab-active" data-project-tab="expenses">–†–∞—Å—Ö–æ–¥—ã</button>
          <button class="btn" data-project-tab="payments">–û–ø–ª–∞—Ç—ã</button>
          <button class="btn" data-project-tab="sheets">Google Sheets</button>
        </div></div>

        <div class="scene project-tab active" id="project-tab-expenses">
          <div class="grid expense-sheet">
            <div class="row expense-group-controls">
              <button class="btn">+ –≥—Ä—É–ø–ø–∞</button>
              <input class="input expense-group-create-input" value="–ù–æ–≤–∞—è –≥—Ä—É–ø–ø–∞" />
            </div>

            <div class="sheet-group">
              <div class="sheet-group-head"><div>–°—Ç—Ä–æ–π–∫–∞</div><div class="row"><span>6 333</span><button class="btn sheet-plus-btn">+</button></div></div>
              <div class="table-wrap">
                <table class="expense-table">
                  <thead>
                    <tr><th>–°—Ç–∞—Ç—å—è</th><th>–î–∞—Ç–∞<br>–æ–ø–ª–∞—Ç—ã</th><th>–®—Ç</th><th>–¶–µ–Ω–∞<br>–∑–∞ –µ–¥</th><th>–°—É–º–º–∞</th><th>–í<br>—Å–º–µ—Ç—É</th><th>–î–æ–ø<br>–ø—Ä–∏–±—ã–ª—å</th><th>–°—É–º–º–∞ –¥–æ–ø<br>–ø—Ä–∏–±—ã–ª–∏</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><input class="input" value="–°—Ç–∞–∫–∞–Ω" /></td>
                      <td><input class="input" value="2026-02-17" /></td>
                      <td><input class="input" value="1" /></td>
                      <td><input class="input" value="1 333" /></td>
                      <td><input class="input" value="1 333" /><div style="margin-top:4px;color:rgba(255,45,161,0.76);font-size:11px;">–ò—Ç–æ–≥ –ø–æ —Å—Ç—Ä–æ–∫–µ: 2 333</div></td>
                      <td><input type="checkbox" checked /></td>
                      <td><input type="checkbox" checked /></td>
                      <td><input class="input" value="1 000" /></td>
                      <td><button class="btn icon-btn">üóë</button></td>
                    </tr>
                    <tr>
                      <td><input class="input" value="–∫—Ä—É–∂–∫–∞" /></td>
                      <td><input class="input" value="" placeholder="–¥–¥.–º–º.–≥–≥–≥–≥" /></td>
                      <td><input class="input" value="4" /></td>
                      <td><input class="input" value="1 000" /></td>
                      <td><input class="input" value="4 000" /></td>
                      <td><input type="checkbox" checked /></td>
                      <td><input type="checkbox" /></td>
                      <td>‚Äî</td>
                      <td><button class="btn icon-btn">üóë</button></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="panel agency-line">
              <div class="agency-row">
                <div class="h1">–ê–≥–µ–Ω—Ç—Å–∫–∏–µ (10%)</div>
                <div class="agency-amount">0</div>
                <label class="row"><input type="checkbox" checked /><span>–í —Å–º–µ—Ç—É</span></label>
              </div>
            </div>
          </div>
        </div>

        <div class="scene project-tab" id="project-tab-payments">
          <div class="grid income-sheet payments-layout">
            <div class="row"><button class="btn sheet-plus-btn">+</button></div>
            <div class="panel payments-rows-panel">
              <div class="payments-list-wrap">
                <div class="payments-line"><input class="input payments-date-input" value="2026-02-16" /><input class="input payments-amount-input" value="10 000 000" /><button class="btn icon-btn">üóë</button></div>
                <div class="payments-line"><input class="input payments-date-input" value="2026-04-17" /><input class="input payments-amount-input" value="100 000" /><button class="btn icon-btn">üóë</button></div>
              </div>
            </div>
          </div>
        </div>

        <div class="scene project-tab" id="project-tab-sheets">
          <div class="classic-layout">
            <div class="panel">
              <div class="h1">Google Sheets (mock)</div>
              <div class="muted">spreadsheet_id: ‚Äî</div>
              <div class="muted">tab: PROJECT</div>
              <div class="muted">last_published_at: ‚Äî</div>
              <div class="row" style="margin-top:10px;"><button class="btn">Publish</button><button class="btn">Import Preview</button><button class="btn">Import Apply</button></div>
            </div>
            <div class="panel"><div class="h1">Diff Preview</div><div class="muted">–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π</div></div>
          </div>
        </div>
      </section>

      <section class="scene" id="scene-life">
        <div class="panel top-panel">
          <div class="row" style="justify-content: space-between;">
            <div></div>
            <div class="row"><input class="input" style="width:170px;" value="100 000" /><button class="btn">–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å</button></div>
          </div>
        </div>

        <div class="dashboard-strip life-kpi-strip">
          <div class="kpi-card">
            <div class="muted">–ü–µ—Ä–∏–æ–¥</div>
            <button class="kpi-value" data-month-open="life-month" style="margin:5px 0 0;padding:0;border:0;background:transparent;color:inherit;text-align:left;cursor:pointer;">–º–∞—Ä—Ç 2026</button>
            <input id="life-month" class="month-hidden" type="month" value="2026-03" />
          </div>
          <div class="kpi-card"><div class="muted">–¶–µ–ª—å –Ω–∞ –∂–∏–∑–Ω—å</div><div class="kpi-value">100 000</div></div>
          <div class="kpi-card"><div class="muted">–ü–æ–∫—Ä—ã—Ç–æ</div><div class="kpi-value">0</div></div>
          <div class="kpi-card"><div class="muted">–í –∫–æ–ø–∏–ª–∫—É</div><div class="kpi-value accent">0</div></div>
        </div>

        <div class="panel"><div style="color:var(--text);">–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–æ —Ü–µ–ª–∏: 100 000</div></div>

        <div class="panel">
          <div class="h1" style="margin-bottom:10px;">–†–∞–∑–±–æ—Ä –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º</div>
          <div class="table-wrap">
            <table class="life-table">
              <thead><tr><th>–ü—Ä–æ–µ–∫—Ç</th><th>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</th><th>–ü–æ–ª—É—á–µ–Ω–æ –∑–∞ –º–µ—Å—è—Ü</th><th>–ù–∞ –∂–∏–∑–Ω—å</th><th>–í –∫–æ–ø–∏–ª–∫—É</th></tr></thead>
              <tbody><tr><td>2</td><td>–ö–ª–∏–µ–Ω—Ç</td><td>0</td><td>0</td><td>0</td></tr></tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="scene" id="scene-settings">
        <div class="card">
          <div class="row" style="justify-content: space-between;"><div class="h1">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div><button class="btn" data-scene="overview">‚Üê –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button></div>
        </div>
        <div class="card">
          <div class="h1">Google</div>
          <div class="grid" style="margin-top:10px;">
            <input class="input" placeholder="Google login (email)" value="demo@gmail.com" />
            <input class="input" type="password" placeholder="Google password" value="********" />
            <div class="row"><button class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å</button><button class="btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button><button class="btn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å Google (OAuth)</button></div>
          </div>
        </div>
      </section>
    </div>

    <div class="modal-backdrop" id="modal-add-project">
      <div class="modal">
        <div class="row" style="justify-content: space-between;"><div class="h1">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</div><button class="btn" data-close>–ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="grid-2" style="margin-top:10px;">
          <input class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" />
          <input class="input" placeholder="–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è" />
          <input class="input" placeholder="Email –∫–ª–∏–µ–Ω—Ç–∞" />
          <input class="input" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞" />
        </div>
        <div class="row" style="margin-top:10px;"><button class="btn active">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button></div>
      </div>
    </div>

    <div class="modal-backdrop" id="modal-accent">
      <div class="modal accent-modal">
        <div class="row" style="justify-content: space-between;"><div class="h1">–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç</div><button class="btn" data-close>–ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="row" style="margin-top:12px;align-items:center;">
          <input id="accent-picker" class="input accent-color-input" type="color" value="#ff2da1" />
          <input id="accent-hex" class="input accent-hex-input" value="#ff2da1" />
          <button class="btn" id="accent-reset">–°–±—Ä–æ—Å</button>
        </div>
      </div>
    </div>

    <div class="modal-backdrop" id="modal-project-settings">
      <div class="modal">
        <div class="row" style="justify-content: space-between;"><div class="h1">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞</div><button class="btn" data-close>–ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="grid-2" style="margin-top:10px;">
          <div><div class="muted">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</div><input class="input" value="2" /></div>
          <div><div class="muted">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏—Ä–º—ã</div><input class="input" value="–ö–ª–∏–µ–Ω—Ç" /></div>
          <div><div class="muted">–ê–≥–µ–Ω—Ç—Å–∫–∏–µ, %</div><input class="input" value="10" /></div>
          <div><div class="muted">–ê–≥–µ–Ω—Ç—Å–∫–∏–µ –≤ —Å–º–µ—Ç—É</div><label class="row"><input type="checkbox" checked /><span class="muted">–í–∫–ª—é—á–∞—Ç—å</span></label></div>
        </div>
        <div style="margin-top:10px;"><div class="muted">–¢–µ–ª–µ—Ñ–æ–Ω—ã –∫–æ–Ω—Ç–∞–∫—Ç–∞</div><div class="row" style="margin-top:6px;"><input class="input" value="+7 999 000-00-00" /><button class="btn">+</button></div></div>
        <div class="row" style="margin-top:12px;"><button class="btn active">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button></div>
      </div>
    </div>
  </div>

  <script>
    (function initTheme(){
      const saved = localStorage.getItem('cxema_theme');
      const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
      const theme = saved || (prefersLight ? 'light' : 'dark');
      document.documentElement.setAttribute('data-theme', theme);
      renderThemeIcon();
    })();

    (function initAccent(){
      const saved = localStorage.getItem('cxema_accent') || '#ff2da1';
      document.documentElement.style.setProperty('--accent', saved);
      const picker = document.getElementById('accent-picker');
      const hex = document.getElementById('accent-hex');
      if (picker) picker.value = saved;
      if (hex) hex.value = saved;
    })();

    function renderThemeIcon(){
      const icon = document.getElementById('theme-icon');
      if(!icon) return;
      const isLight = document.documentElement.getAttribute('data-theme') === 'light';
      icon.innerHTML = isLight
        ? '<path d="M12 3v2.2M12 18.8V21M4.2 12H3M21 12h-1.2M6.1 6.1 4.6 4.6M19.4 19.4l-1.5-1.5M17.9 6.1l1.5-1.5M4.6 19.4l1.5-1.5"/><circle cx="12" cy="12" r="4.2" />'
        : '<path d="M21 12.8A7.4 7.4 0 0 1 11.2 3a6.8 6.8 0 1 0 9.8 9.8Z" />';
    }

    function openMonthPicker(id){
      const picker = document.getElementById(id);
      if(!picker) return;
      if (typeof picker.showPicker === 'function') picker.showPicker();
      else picker.focus();
    }

    document.getElementById('theme-toggle')?.addEventListener('click', () => {
      const cur = document.documentElement.getAttribute('data-theme') || 'dark';
      const next = cur === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('cxema_theme', next);
      renderThemeIcon();
    });

    document.querySelectorAll('[data-month-open]').forEach((btn) => {
      btn.addEventListener('click', () => openMonthPicker(btn.getAttribute('data-month-open')));
    });

    const scenes = {
      overview: document.getElementById('scene-overview'),
      project: document.getElementById('scene-project'),
      life: document.getElementById('scene-life'),
      settings: document.getElementById('scene-settings'),
    };

    function activateScene(next){
      Object.entries(scenes).forEach(([k, el]) => el && el.classList.toggle('active', k === next));
      document.querySelectorAll('[data-scene]').forEach((b) => b.classList.toggle('active', b.getAttribute('data-scene') === next));
    }

    document.querySelectorAll('[data-scene]').forEach((btn) => {
      btn.addEventListener('click', () => activateScene(btn.getAttribute('data-scene')));
    });

    const tabs = {
      expenses: document.getElementById('project-tab-expenses'),
      payments: document.getElementById('project-tab-payments'),
      sheets: document.getElementById('project-tab-sheets'),
    };

    function activateTab(next){
      Object.entries(tabs).forEach(([k, el]) => el && el.classList.toggle('active', k === next));
      document.querySelectorAll('[data-project-tab]').forEach((b) => b.classList.toggle('tab-active', b.getAttribute('data-project-tab') === next));
    }

    document.querySelectorAll('[data-project-tab]').forEach((btn) => {
      btn.addEventListener('click', () => activateTab(btn.getAttribute('data-project-tab')));
    });

    document.querySelectorAll('[data-open]').forEach((btn) => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('data-open');
        document.getElementById(`modal-${id}`)?.classList.add('active');
      });
    });

    document.querySelectorAll('[data-close]').forEach((btn) => {
      btn.addEventListener('click', () => btn.closest('.modal-backdrop')?.classList.remove('active'));
    });

    document.querySelectorAll('.modal-backdrop').forEach((backdrop) => {
      backdrop.addEventListener('click', (e) => {
        if (e.target === backdrop) backdrop.classList.remove('active');
      });
    });

    document.getElementById('accent-picker')?.addEventListener('input', (e) => {
      const v = e.target.value;
      document.documentElement.style.setProperty('--accent', v);
      localStorage.setItem('cxema_accent', v);
      const hex = document.getElementById('accent-hex');
      if (hex) hex.value = v;
    });

    document.getElementById('accent-hex')?.addEventListener('input', (e) => {
      const v = (e.target.value || '').trim();
      if (/^#[0-9a-fA-F]{6}$/.test(v)) {
        const value = v.toLowerCase();
        document.documentElement.style.setProperty('--accent', value);
        localStorage.setItem('cxema_accent', value);
        const picker = document.getElementById('accent-picker');
        if (picker) picker.value = value;
      }
    });

    document.getElementById('accent-reset')?.addEventListener('click', () => {
      const value = '#ff2da1';
      document.documentElement.style.setProperty('--accent', value);
      localStorage.setItem('cxema_accent', value);
      const picker = document.getElementById('accent-picker');
      const hex = document.getElementById('accent-hex');
      if (picker) picker.value = value;
      if (hex) hex.value = value;
    });

    activateScene('overview');
    activateTab('expenses');
  </script>
</body>
</html>
